<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="utf-8">
        <meta content="width=device-width, initial-scale=1" name="viewport">

        <title th:text="${albumDetails != null} ? ${albumDetails.title} : 'Album non trovato'">BeatBuddy</title>
        <meta content="" name="description">
        <meta content="" name="keywords">

        <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Roboto:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

        <!-- Favicons -->
        <link href="img/logo.png" rel="icon">
        <link href="img/logo.png" rel="apple-touch-icon">
        
        <!-- Main CSS File -->
        <link href="css/style.css" rel="stylesheet">

        <!-- AOS -->
        <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

        <!-- FontAwesome -->
        <link href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" rel="stylesheet">

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
        <script src="js/searchBar.js" type="text/javascript"></script>
        <script src="js/search_btn.js" type="text/javascript"></script>

        <!-- Bootstrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    </head>
    <body>
        <div th:if="${albumFound}" class="main">
            <input type="hidden" id="is_logged" th:value="${logged}"/>
            <header class="header sticky-top shadow">
                
            </header>
            <section id="hero" class="d-flex flex-column align-items-center container-fluid p-3">
                <div class="gap-1 d-flex flex-column container-fluid justify-content-center" data-aos="zoom-in" data-aos-delay="150">
                    <div id="album_info" class="d-flex mb-1 col-md-12">
                        <img id="album_cover" class="album-cover" th:src="${albumDetails.coverURL}" alt="Copertina Album"/>
                        <div id="album_details" class="album-details d-flex flex-column">
                            <h1 id="album_title" class="display-5 mb-0" style="font-weight: bold;" th:text="${albumDetails.title}"></h1>
                            <div class="d-flex mt-0 mb-0">
                                <p style="font-size: medium;" id="album_artists_page" th:text="${#strings.arrayJoin(albumDetails.artists, ', ')}"></p>
                                <p style="font-size: medium;" id="release_date_page" th:text="${albumDetails.year}"></p>
                                <p style="font-size: medium;" id="album_duration_page"><i class="fas fa-clock me-1"></i>34:54</p>
                            </div>
                            <div class="d-flex">
                                <div id="like_album_container" class="d-flex w-25 align-items-center">
                                    <button id="like_album_btn" class="btn btn-danger ms-1" type="button" th:disabled="${not logged}">
                                        <i class="fas fa-heart me-1"></i>Like
                                    </button>
                                    <div id="number_of_likes_album" class="ms-3" th:text="${albumDetails.likes}"></div>
                                </div>
                                <div id="average_rating_container" class="d-flex w-25 align-items-center">
                                    <span style="border-radius: 5px 0px 0px 5px;" class="text-bg-warning p-3">
                                        Average rating
                                    </span>
                                    <i class="fa fa-star me-1 ps-3"></i>
                                    <div id="average_rating" th:text="${albumDetails.averageRating}"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex gap-1">
                        <div id="album_songs" class="d-flex flex-column row-gap-1 col-md-6 p-1">
                            <div th:each="song : ${albumDetails.songs}" class="song-container d-flex justify-content-between align-items-center p-1">
                                <div class="d-flex gap-3 align-items-center">
                                    <i class="fa fa-music ms-3"></i>
                                    <div class="d-flex flex-column ps-1 pt-1">
                                        <p style="font-size: large; font-weight: bold;" class="mt-1 mb-0" th:text="${song.name}"></p>
                                        <p style="font-size: medium;" class="mt-1">
                                            <i class="fas fa-clock me-1"></i>
                                            <span th:text="${song.duration_ms}"></span>
                                        </p>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center" id="like_container">
                                    <button class="btn btn-primary" type="button" id="like_song_btn" th:disabled="${not logged}">
                                        <i class="fas fa-heart me-1"></i>Like
                                    </button>
                                </div>
                            </div>                            <!--<div class="song-container d-flex justify-content-between align-items-center p-1">
                                <div class="d-flex flex-column ps-1 pt-1">
                                    <p style="font-size: large; font-weight: bold;" id="song_title" class="mt-1 mb-0">Madre metropoli (Les caves de l'amour)</p>
                                    <p style="font-size: medium;" id="song_duration" class="mt-1"><i class="fas fa-clock me-1"></i>3:05</p>
                                </div>
                                <div id="like_container" class="d-flex align-items-center">
                                    <button id="like_song_btn" class="btn btn-primary" type="button">
                                        <i class="fas fa-heart me-1"></i>Like
                                    </button>
                                </div>
                            </div>-->
                        </div>
                        <div class="d-flex flex-column col-md-6">
                            <div id="album_reviews" class="d-flex flex-column">
                                <div id="latest_reviews" class="d-flex flex-column row-gap-1 p-1">
                                    <h1 style="text-align: center">Last 5 reviews</h1>
                                    <div th:each="review : ${albumDetails.lastReviews}" class="album-review d-flex flex-column p-3">
                                        <div class="d-flex align-items-center gap-1">
                                            <h4 th:text="${review.username}" id="user_review"></h4>
                                            <h5 id="rating_review" class="text-bg-dark p-1 ps-3 pe-3">
                                                <i class="fas fa-star me-1"></i>
                                                <span th:text="${review.rating}"></span>
                                            </h5>
                                        </div>
                                        <div th:text="${review.text}" id="text_review"></div>
                                    </div>
                                </div>
                                <div class="d-flex gap-1">
                                    <button id="view_all_review_btn" class="btn btn-primary mt-1 col-6" type="button" th:disabled="${not logged}">View all the reviews</button>
                                    <button th:if="${not logged}" id="write_review_btn_dis" class="btn btn-primary mt-1 col-6" type="button" th:disabled="${not logged}">Write a review</button>
                                    <a th:if="${logged}" id="write_review_btn" class="btn btn-primary mt-1 col-6" type="button">Write a review</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                    <!--<div class="container-fluid justify-content-center" data-aos="zoom-in" data-aos-delay="150">
                        <div class="container-fluid justify-content-center" data-aos="zoom-in" data-aos-delay="150">
                            <div class="row d-flex">
                                <div class="col-md-8 album-details">
                                    <img id="album-cover" class="shadow" src="https://ondarock.it/images/cover/ClubDogoClubDogoCover_1705244254.jpg">
                                    <div id="album-details" class="d-flex flex-column">
                                        <h1 class="display-1" style="font-weight: bold;" id="album-title">Club Dogo</h1>
                                        <div class="d-flex">
                                            <p style="font-size: x-large;" id="album-artists">Club Dogo</p>
                                            <p style="font-size: x-large;" id="release-date">2024</p>
                                            <p style="font-size: x-large;" id="album-duration"><i class="fas fa-clock"></i>34 min 54 sec</p>
                                        </div>
                                    </div>
                                </div>
                    
                                <div class="col-md-4 album-songs">
                                    <div class="container-fluid d-flex flex-column">
                                        <h3 id="song-title">C'era una volta in Italia</h3>
                                        <h3 id="song-duration">3:05</h3>
                                    </div>
                                    <div class="container-fluid like-button">
                                        <button id="like-btn" class="btn btn-primary">
                                            <i class="fas fa-heart"></i> Mi Piace
                                        </button>
                                        <div class="m-1" id="number-of-likes">5.000</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>-->

                    <!--<div id="album-reviews" class="container-fluid d-flex flex-column">
                        <div id="latest-reviews" class="container-fluid d-flex flex-column">
                            <div class="container-fluid d-flex">
                                <h4 id="user-review">PincoPallo</h4>
                                <h4 id="rating-review">
                                    <i class="fas fa-star"></i>
                                    <span>3</span>
                                </h4>
                            </div>
                            <div id="text-review">
                                Bellissimo album, le palle stanno sopra il cazzo.
                            </div>
                        </div>
                        <button id="view-all-review-btn" class="btn btn-outline-secondary">View all the reviews</button>
                        <div id="write-review">
                            <h3>Write a review</h3>
                            <form>
                                <div class="form-group">
                                    <label for="rating">Rating</label>
                                    <select class="form-control" id="rating">
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="reviewText">Body of the review</label>
                                    <textarea class="form-control" id="reviewText" rows="5"></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary">Send</button>
                            </form>
                        </div>
                    </div>-->
                </div>
              </div>
            </section><!-- End Hero -->
        </div>

        <div th:unless="${albumFound}">
            <p>Album non trovato o dettagli non disponibili.</p>
        </div>

        <!-- AOS JavaScript -->
        <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
        <script>
            AOS.init();
        </script>

        <!-- Bootstrap JavaScript -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    </body>
</html>